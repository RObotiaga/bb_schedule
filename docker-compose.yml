services:
  schedule_bot:
    build: .
    restart: always
    environment:
      - BB_LOGIN=${BB_LOGIN}
      - BB_PASSWORD=${BB_PASSWORD}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - ADMIN_ID=${ADMIN_ID}
    volumes:
      - ./data:/app/data
    command: python -m app.main bot

  schedule_web:
    build: .
    restart: always
    ports:
      - "8010:8000"
    volumes:
      - ./data:/app/data
    environment:
      - BB_LOGIN=${BB_LOGIN}
      - BB_PASSWORD=${BB_PASSWORD}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - ADMIN_ID=${ADMIN_ID}
    # Using the python wrapper or direct uvicorn. Wrapper is consistent.
    command: python -m app.main web
